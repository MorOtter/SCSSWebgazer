<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/css/style.css" rel="stylesheet">

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Favicon -->
    <link rel="icon" href="/public/assets/favicon.webp" type="image/x-icon">
    <!-- Page Title -->
    <title>Security Control Simulation System</title>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="custom-navbar">
        <div class="navbar-logo">
            <a>SCSS</a>
        </div>
    </nav>

    <section class="info">
        <h1>Consent Form</h1>
        <h2><b>Name of Chief / Principal Investigator:</b> Mordecai Otter</h2>
        <p>I confirm that I have read the information sheet and understand that my participation in this project, which will require approximately 30 minutes over two sessions...</p>
        
        <!-- Consent form -->
        <section class="consent">
            <div class="d-flex w-100 justify-content-between border border-2 border-warning">
                <input type="checkbox" class="form-check-input" id="consent-checkbox" name="consent-checkbox">
                <label for="consent-checkbox" class="form-check-label">I, consent to participate in the study conducted by Mordecai Otter...</label>
            </div>

            <!-- The consent form to submit -->
            <form action="/participant/login" method="POST" id="consent-form">
                <div class="row">
                    <div class="col-10">
                        <p>I confirm that I have read the information sheet on the previous page.</p>
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control" name="consent">
                    </div>
                </div>
                <div class="row">
                    <div class="col-10">
                        <p>I confirm that I have understood the information sheet...</p>
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control" name="consent">
                    </div>
                </div>
                <!-- Continue for other consent points as in your form -->
            </form>
        </section>
        <p><b>THANK YOU FOR PARTICIPATING IN OUR RESEARCH</b></p>
        <button class="btn" id="proceedToLogin">Confirm</button>
    </section>
</body>

<script>
    var box = document.getElementById("consent-checkbox");
    box.addEventListener("click", () => {
        box.checked ? box.parentElement.classList.remove("border-warning") : box.parentElement.classList.add("border-warning");
    });

    document.getElementById("proceedToLogin").addEventListener("click", (event) => {
        // Check if main checkbox is checked
        if (!document.getElementById('consent-checkbox').checked) {
            document.getElementById('consent-checkbox').parentElement.classList.add("border-danger");
            event.preventDefault();
            window.alert("Please provide an electronic signature by clicking the checkbox");
            return;
        }
        
        document.getElementById('consent-checkbox').parentElement.classList.remove("border-danger");

        // Check if all text inputs are filled
        var initials = document.getElementsByName('consent');
        for (let item of initials) {
            if (item.value === '') {
                item.classList.add("border");
                item.classList.add("border-2");
                item.classList.add("border-danger");
                event.preventDefault();
                window.alert("Please initial each box to confirm your consent");
                return;
            }
            item.classList.remove("border");
            item.classList.remove("border-2");
            item.classList.remove("border-danger");
        }

        // If validation passes, submit form and route to next page
        const form = document.getElementById("consent-form");
        form.submit();
    });
</script>

</html>
